<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ping-Pong</title>
        <style>
        * {
            overflow: hidden;
            margin: 0;
            padding: 0;
       }
        </style>
    </head>
    <body>
        <canvas></canvas>
        <script>
            const canvasE1 = document.querySelector("canvas"), canvasCtx = canvasE1.getContext("2d"),
            gapx = 10

            const mouse = { x: 0, y: 0}
            // objeto campo
            const field = {
                w: window.innerWidth, // largura do campo-- this ta chamando aqui
                h: window.innerHeight, // altura do campo-- this ta chamando aqui
                draw: function(){
                    canvasCtx.fillStyle = "#286047" // style tem que esta com "S" maiusculo
                    canvasCtx.fillRect(0, 0,this.w, this.h)
                }
            }
            
// Desenhando a linha central
// objeto line
          
            const line = {
                w:15,  // this esta chamando aqui
                h: field.h,
                draw: function(){
                    canvasCtx.fillStyle = "#ffffff"
                    canvasCtx.fillRect( field.w / 2 - this.w / 2, 
                    0, 
                    this.w, 
                    this.h 
                )

                }
            }
//desenhando a raquete esquerda
            const leftPaddle = {
                x: gapx,
                y: 100,
                w: line.w,
                h: 200,
                _move: function(){
                    this.y = mouse.y - this.h / 2
                },
                draw:function(){
                    canvasCtx.fillStyle = "#ffffff"
                    canvasCtx.fillRect(this.x,this.y, this.w, this.h)

                    this._move()
                },
            }
// desenho da raquete direita
            const  rightPaddle = {
                x: field.w - line.w - gapx,
                y: 100,
                w: line.w,
                h: 200,
                _move: function(){
                    this.y = ball.y



                },
                draw:function(){
                    canvasCtx.fillStyle = "#ffffff"
                    canvasCtx.fillRect(this.x,this.y, this.w, this.h)

                    this._move()
                }

            }
// desenho da bolinha
            const ball = { 
                x:0,
                y:0,
                r:20,
                speed: 5,
                directionX: 1,
                directionY: 1,
                _calcPosition: function(){
                    if(
                        (this.y - this.r < 0 && this.directionY < 0) ||
                    (this.y > field.h - this.r && this.directionY > 0)
                    )   {
                        this._reverseY()
                    }
                    
                },
                
// rebatendo nas laterais do  campo
                _reverseX: function(){
                    // 1 * -1 = -1
                    // -1 * -1 = 1
                    this.directionX *= -1
                },
                _reverseY: function() {
                    // 1 * -1 = -1
                    // -1 * -1 = 1
                    this.directionY *= -1

                },
                _move: function(){
                    this.x += this.directionX * this.speed
                    this.y += this.directionY * this.speed

                },
                draw:function (){
                    canvasCtx.fillStyle = "#ffffff"
                    canvasCtx.beginPath()
                    canvasCtx.arc(this.x, this.y, this.r, 0, 2 * Math.PI, false)
                    canvasCtx.fill()

                    this._calcPosition()
                    this._move()

                },

            }
// desenhar o placar  
            const score = {
                human: 1,
                computer: 2,
                draw: function(){
                    canvasCtx.font = "bold 72px Arial"
                    canvasCtx.textAlign = "center"
                    canvasCtx.textBaseline = "top"
                    canvasCtx.fillStyle = '#01341D'
                    canvasCtx.fillText(this.human,field.w /4, 50 )
                    canvasCtx.fillText(this.computer,field.w /4 + field.w / 2, 50)

                }

            }

               // Desenhando o campo 
            function setup(){ 
                canvasE1.width = canvasCtx.width = field.w
                canvasE1.height = canvasCtx.height = field.h

            }
            // Desenho do campo
                 
            function draw () {
                field.draw()
                line.draw()

                leftPaddle.draw()
                rightPaddle.draw()

                ball.draw()
                score.draw()

// height Ã© a  altura

            }
            
            window.animateFrame = (function(){
                return(
                    window.requestAnimationFrame ||
                    function (callback){
                        return window.setTimeout(callback,1000 / 60)
                    }


                )

            })()
            function main (){
                animateFrame(main)
                draw()

            }
            setup()
            main()
            
            canvasE1.addEventListener('mousemove', function(e){
                mouse.x = e.pageX
                mouse.y = e.pageY

              
            })
        </script>
    </body>
</html>
